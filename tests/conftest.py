"""Global fixtures for unit tests."""

import discord
import pytest_asyncio
from discord.ext import commands
from discord.ext import test as dpytest

from growlery.cogs import cog_list
from growlery.config import (
    COMMAND_PREFIX,
)

MOCK_1DEF_UIM_USER_DATA = """
117027,2179,654137123
165773,99,15920472
-1,1,0
16892,99,74579180
20160,99,79301884
25745,99,75057237
4262,99,15895603
6212,99,58693615
27222,99,22177336
36541,99,16254906
25009,99,14860166
21736,99,17543332
15027,99,22036632
14921,99,15749745
17025,99,15082409
28412,99,15702620
3999,99,21223207
8580,99,15957985
13091,99,25221847
66949,99,16929972
5457,99,59056555
10447,99,17707904
16292,99,20220078
1004,99,18964438
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
3724,3358
291,1286
5115,741
13283,648
9640,555
32705,99
83352,29
56391,1136
-1,-1
-1,-1
258321,110
111740,680
55588,508
88947,760
11199,100
14941,802
40383,194
204499,285
12057,86
-1,-1
162975,19
222986,150
15985,969
-1,-1
30956,172
182115,25
13230,1003
116849,50
19665,238
88372,332
44227,730
191125,119
71224,25
11101,1030
181952,188
286012,51
207525,55
6785,307
174788,52
231748,141
180580,1487
-1,-1
113790,103
47249,100
51268,5
116481,59
-1,-1
-1,-1
72332,19
142363,30
51277,215
134983,25
238359,17
1521,158
-1,-1
105172,19
33194,369
209542,11
32531,579
8766,172
11309,656
5127,876
-1,-1
-1,-1
86313,735
43592,110
76495,45
-1,-1
-1,-1
3492,2515
218760,8
204016,6
-1,-1
421589,258
19052,506
71023,1490
""".strip()

MOCK_SKILLER_USER_DATA = """
1104028,1560,515833431
-1,1,-1
-1,1,-1
-1,1,-1
-1,1,-1
-1,1,-1
-1,1,-1
-1,1,-1
9051,99,50140080
49550,99,14791423
3866,99,33560342
15807,99,19793939
3585,99,50002310
1110,99,50187120
1892,99,60394850
38461,99,14683777
49897,99,13292359
2774,99,23612113
4828,99,50002969
1483234,59,259640
7637,99,49608868
22513,99,14397456
3154,99,47493743
552,99,23611033
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
36044,1533
-1,-1
-1,-1
148186,190
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
38165,340
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
5013,1368
-1,-1
-1,-1
""".strip()


@pytest_asyncio.fixture
async def bot():
    """Create a bot instance for testing."""
    intents = discord.Intents.default()
    intents.members = True
    intents.message_content = True

    _bot = commands.Bot(command_prefix=COMMAND_PREFIX, intents=intents)

    await _bot._async_setup_hook()  # noqa: SLF001

    for cog in cog_list:
        await _bot.add_cog(cog(_bot))

    dpytest.configure(_bot)

    return _bot


@pytest_asyncio.fixture(autouse=True)
async def cleanup():
    """Perform cleanup after every test, emptying the message queue."""
    yield
    await dpytest.empty_queue()


@pytest_asyncio.fixture
def mock_user_data():
    """Provide mock data for most users."""
    return MOCK_1DEF_UIM_USER_DATA


@pytest_asyncio.fixture
def mock_skiller_data():
    """Provide mock data for skillers."""
    return MOCK_SKILLER_USER_DATA
